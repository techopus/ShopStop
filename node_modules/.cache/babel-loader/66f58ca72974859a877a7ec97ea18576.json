{"ast":null,"code":"var _jsxFileName = \"/home/nitin/Desktop/projects/e-commerce-site/src/context.js\";\nimport React, { Component } from \"react\";\nimport { storeProducts, detailProduct } from \"./data\";\nconst ProductContext = React.createContext();\nclass ProductProvider extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      products: [],\n      detailProduct: detailProduct,\n      cart: [],\n      modalOpen: false,\n      modalProduct: detailProduct,\n      cartSubTotal: 0,\n      cartTax: 0,\n      cartTotal: 0\n    };\n    this.setProducts = () => {\n      let products = [];\n      storeProducts.forEach(item => {\n        const singleItem = {\n          ...item\n        };\n        products = [...products, singleItem];\n      });\n      this.setState(() => {\n        return {\n          products\n        };\n      }, this.checkCartItems);\n    };\n    this.getItem = id => {\n      const product = this.state.products.find(item => item.id === id);\n      return product;\n    };\n    this.handleDetail = id => {\n      const product = this.getItem(id);\n      this.setState(() => {\n        return {\n          detailProduct: product\n        };\n      });\n    };\n    this.addToCart = id => {\n      let tempProducts = [...this.state.products];\n      const index = tempProducts.indexOf(this.getItem(id));\n      const product = tempProducts[index];\n      product.inCart = true;\n      product.count = 1;\n      const price = product.price;\n      product.total = price;\n      this.setState(() => {\n        return {\n          products: [...tempProducts],\n          cart: [...this.state.cart, product],\n          detailProduct: {\n            ...product\n          }\n        };\n      }, this.addTotals);\n    };\n    this.openModal = id => {\n      const product = this.getItem(id);\n      this.setState(() => {\n        return {\n          modalProduct: product,\n          modalOpen: true\n        };\n      });\n    };\n    this.closeModal = () => {\n      this.setState(() => {\n        return {\n          modalOpen: false\n        };\n      });\n    };\n    this.increment = id => {\n      let tempCart = [...this.state.cart];\n      const selectedProduct = tempCart.find(item => {\n        return item.id === id;\n      });\n      const index = tempCart.indexOf(selectedProduct);\n      const product = tempCart[index];\n      product.count = product.count + 1;\n      product.total = product.count * product.price;\n      this.setState(() => {\n        return {\n          cart: [...tempCart]\n        };\n      }, this.addTotals);\n    };\n    this.decrement = id => {\n      let tempCart = [...this.state.cart];\n      const selectedProduct = tempCart.find(item => {\n        return item.id === id;\n      });\n      const index = tempCart.indexOf(selectedProduct);\n      const product = tempCart[index];\n      product.count = product.count - 1;\n      if (product.count === 0) {\n        this.removeItem(id);\n      } else {\n        product.total = product.count * product.price;\n        this.setState(() => {\n          return {\n            cart: [...tempCart]\n          };\n        }, this.addTotals);\n      }\n    };\n    this.getTotals = () => {\n      // const subTotal = this.state.cart\n      //   .map(item => item.total)\n      //   .reduce((acc, curr) => {\n      //     acc = acc + curr;\n      //     return acc;\n      //   }, 0);\n      let subTotal = 0;\n      this.state.cart.map(item => subTotal += item.total);\n      const tempTax = subTotal * 0.1;\n      const tax = parseFloat(tempTax.toFixed(2));\n      const total = subTotal + tax;\n      return {\n        subTotal,\n        tax,\n        total\n      };\n    };\n    this.addTotals = () => {\n      const totals = this.getTotals();\n      this.setState(() => {\n        return {\n          cartSubTotal: totals.subTotal,\n          cartTax: totals.tax,\n          cartTotal: totals.total\n        };\n      }, () => {\n        // console.log(this.state);\n      });\n    };\n    this.removeItem = id => {\n      let tempProducts = [...this.state.products];\n      let tempCart = [...this.state.cart];\n      const index = tempProducts.indexOf(this.getItem(id));\n      let removedProduct = tempProducts[index];\n      removedProduct.inCart = false;\n      removedProduct.count = 0;\n      removedProduct.total = 0;\n      tempCart = tempCart.filter(item => {\n        return item.id !== id;\n      });\n      this.setState(() => {\n        return {\n          cart: [...tempCart],\n          products: [...tempProducts]\n        };\n      }, this.addTotals);\n    };\n    this.clearCart = () => {\n      this.setState(() => {\n        return {\n          cart: []\n        };\n      }, () => {\n        this.setProducts();\n        this.addTotals();\n      });\n    };\n  }\n  componentDidMount() {\n    this.setProducts();\n  }\n  render() {\n    return /*#__PURE__*/React.createElement(ProductContext.Provider, {\n      value: {\n        ...this.state,\n        handleDetail: this.handleDetail,\n        addToCart: this.addToCart,\n        openModal: this.openModal,\n        closeModal: this.closeModal,\n        increment: this.increment,\n        decrement: this.decrement,\n        removeItem: this.removeItem,\n        clearCart: this.clearCart\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 13\n      }\n    }, this.props.children);\n  }\n}\nconst ProductConsumer = ProductContext.Consumer;\nexport { ProductProvider, ProductConsumer };","map":{"version":3,"names":["React","Component","storeProducts","detailProduct","ProductContext","createContext","ProductProvider","constructor","args","state","products","cart","modalOpen","modalProduct","cartSubTotal","cartTax","cartTotal","setProducts","forEach","item","singleItem","setState","checkCartItems","getItem","id","product","find","handleDetail","addToCart","tempProducts","index","indexOf","inCart","count","price","total","addTotals","openModal","closeModal","increment","tempCart","selectedProduct","decrement","removeItem","getTotals","subTotal","map","tempTax","tax","parseFloat","toFixed","totals","removedProduct","filter","clearCart","componentDidMount","render","createElement","Provider","value","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","props","children","ProductConsumer","Consumer"],"sources":["/home/nitin/Desktop/projects/e-commerce-site/src/context.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport { storeProducts, detailProduct } from \"./data\";\nconst ProductContext = React.createContext();\n\nclass ProductProvider extends Component {\n    state = {\n        products: [],\n        detailProduct: detailProduct,\n        cart: [],\n        modalOpen: false,\n        modalProduct: detailProduct,\n        cartSubTotal: 0,\n        cartTax: 0,\n        cartTotal: 0\n    };\n    componentDidMount() {\n        this.setProducts();\n    }\n\n    setProducts = () => {\n        let products = [];\n        storeProducts.forEach(item => {\n            const singleItem = { ...item };\n            products = [...products, singleItem];\n        });\n        this.setState(() => {\n            return { products };\n        }, this.checkCartItems);\n    };\n\n    getItem = id => {\n        const product = this.state.products.find(item => item.id === id);\n        return product;\n    };\n    handleDetail = id => {\n        const product = this.getItem(id);\n        this.setState(() => {\n            return { detailProduct: product };\n        });\n    };\n    addToCart = id => {\n        let tempProducts = [...this.state.products];\n        const index = tempProducts.indexOf(this.getItem(id));\n        const product = tempProducts[index];\n        product.inCart = true;\n        product.count = 1;\n        const price = product.price;\n        product.total = price;\n\n        this.setState(() => {\n            return {\n                products: [...tempProducts],\n                cart: [...this.state.cart, product],\n                detailProduct: { ...product }\n            };\n        }, this.addTotals);\n    };\n    openModal = id => {\n        const product = this.getItem(id);\n        this.setState(() => {\n            return { modalProduct: product, modalOpen: true };\n        });\n    };\n    closeModal = () => {\n        this.setState(() => {\n            return { modalOpen: false };\n        });\n    };\n    increment = id => {\n        let tempCart = [...this.state.cart];\n        const selectedProduct = tempCart.find(item => {\n            return item.id === id;\n        });\n        const index = tempCart.indexOf(selectedProduct);\n        const product = tempCart[index];\n        product.count = product.count + 1;\n        product.total = product.count * product.price;\n        this.setState(() => {\n            return {\n                cart: [...tempCart]\n            };\n        }, this.addTotals);\n    };\n    decrement = id => {\n        let tempCart = [...this.state.cart];\n        const selectedProduct = tempCart.find(item => {\n            return item.id === id;\n        });\n        const index = tempCart.indexOf(selectedProduct);\n        const product = tempCart[index];\n        product.count = product.count - 1;\n        if (product.count === 0) {\n            this.removeItem(id);\n        } else {\n            product.total = product.count * product.price;\n            this.setState(() => {\n                return { cart: [...tempCart] };\n            }, this.addTotals);\n        }\n    };\n    getTotals = () => {\n        // const subTotal = this.state.cart\n        //   .map(item => item.total)\n        //   .reduce((acc, curr) => {\n        //     acc = acc + curr;\n        //     return acc;\n        //   }, 0);\n        let subTotal = 0;\n        this.state.cart.map(item => (subTotal += item.total));\n        const tempTax = subTotal * 0.1;\n        const tax = parseFloat(tempTax.toFixed(2));\n        const total = subTotal + tax;\n        return {\n            subTotal,\n            tax,\n            total\n        };\n    };\n    addTotals = () => {\n        const totals = this.getTotals();\n        this.setState(\n            () => {\n                return {\n                    cartSubTotal: totals.subTotal,\n                    cartTax: totals.tax,\n                    cartTotal: totals.total\n                };\n            },\n            () => {\n                // console.log(this.state);\n            }\n        );\n    };\n    removeItem = id => {\n        let tempProducts = [...this.state.products];\n        let tempCart = [...this.state.cart];\n\n        const index = tempProducts.indexOf(this.getItem(id));\n        let removedProduct = tempProducts[index];\n        removedProduct.inCart = false;\n        removedProduct.count = 0;\n        removedProduct.total = 0;\n\n        tempCart = tempCart.filter(item => {\n            return item.id !== id;\n        });\n\n        this.setState(() => {\n            return {\n                cart: [...tempCart],\n                products: [...tempProducts]\n            };\n        }, this.addTotals);\n    };\n    clearCart = () => {\n        this.setState(\n            () => {\n                return { cart: [] };\n            },\n            () => {\n                this.setProducts();\n                this.addTotals();\n            }\n        );\n    };\n    render() {\n        return (\n            <ProductContext.Provider\n                value={{\n                    ...this.state,\n                    handleDetail: this.handleDetail,\n                    addToCart: this.addToCart,\n                    openModal: this.openModal,\n                    closeModal: this.closeModal,\n                    increment: this.increment,\n                    decrement: this.decrement,\n                    removeItem: this.removeItem,\n                    clearCart: this.clearCart\n                }}\n            >\n                {this.props.children}\n            </ProductContext.Provider>\n        );\n    }\n}\n\nconst ProductConsumer = ProductContext.Consumer;\n\nexport { ProductProvider, ProductConsumer };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}